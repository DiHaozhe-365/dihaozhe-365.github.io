<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>第四章 JSP 内置对象 | 邸浩哲Geo</title><meta name="keywords" content="邸浩哲, 博客, 分享, 生活, 科技"><meta name="author" content="邸浩哲Geo"><meta name="copyright" content="邸浩哲Geo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="第四章 JSP 内置对象"><meta name="application-name" content="第四章 JSP 内置对象"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="website"><meta property="og:title" content="第四章 JSP 内置对象"><meta property="og:url" content="http://dihaozhe.com/note/note_3_backend/3.jsp/4.html"><meta property="og:site_name" content="邸浩哲Geo"><meta property="og:description" content="有些对象不用声明就可以在 JSP 页面的 Java 程序片和表达式部分使用，这就是 JSP 的内置对象。 JSP 的常用内置对象有 request、response、session、application 和 out。   4.1 request 对象HTTP 通信协议是用户与服务器之间一种提交（请"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://pic.imgdb.cn/item/64f97fcf661c6c8e544e533e.jpg"><meta property="article:author" content="邸浩哲Geo"><meta property="article:tag" content="邸浩哲, 博客, 分享, 生活, 科技"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pic.imgdb.cn/item/64f97fcf661c6c8e544e533e.jpg"><meta name="description" content="有些对象不用声明就可以在 JSP 页面的 Java 程序片和表达式部分使用，这就是 JSP 的内置对象。 JSP 的常用内置对象有 request、response、session、application 和 out。   4.1 request 对象HTTP 通信协议是用户与服务器之间一种提交（请"><link rel="shortcut icon" href="https://pic.imgdb.cn/item/64f98091661c6c8e544e8413.webp"><link rel="canonical" href="http://dihaozhe.com/note/note_3_backend/3.jsp/4"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与博主们无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（博客首页地址）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n"},
  postHeadAiDescription: {"enable":true,"gptName":"邸浩哲Geo","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: undefined,
  LA51: {"enable":true,"ck":"3FpeCk9AnAHhM8vm","LingQueMonitorID":"3FpeORNir8WHNOiM"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://dihaozhe.zeabur.app',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"","mailMd5":""},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"api","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🧱 团队小组发动机"]},
  algolia: {"appId":"55GLTQ5T7S","apiKey":"6289356dfa814c630ee23c43df7fd008","indexName":"hexo","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 邸浩哲Geo","link":"链接: ","source":"来源: 邸浩哲Geo","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '邸浩哲Geo',
  title: '第四章 JSP 内置对象',
  postAI: '',
  pageFillDescription: '4.1 request 对象, 常用方法, 避免乱码, 4.2 response 对象, 常用方法, 动态响应 contentType 属性, response 对象的重定向, 4.3 session 对象, 常用方法, session 对象的 id, session 对象与 URL 重写, session 对象存储数据, session 对象的生存期限, 4.4 application 对象, 常用方法, 4.5 out 对象, 常用方法, 习题 4有些对象不用声明就可以在页面的程序片和表达式部分使用这就是的内置对象的常用内置对象有和对象通信协议是用户与服务器之间一种提交请求信息与响应信息的通信协议在中内置对象封装了用户提交的信息那么该对象调用相应的方法可以获取封装的信息即使用该对象可以获取用户提交的信息内置对象是实现了接口类的一个实例可以在服务器的中查找接口的方法用户通常使用的表单也称标记请求访问服务器的某个页面或并提交必要信息给所请求的页面表单的一般格式是请求访问的页面或提交手段其中是表单的开始标签是结束标签开始标签和结束标签之间是表单的标记体的内容是表单的属性其属性值给出表单请求访问的页面或表单中的属性取值或方法和方法的主要区别是使用方法提交的信息会在提交的过程中显示在浏览器的地址栏中而方法提交的信息不会显示在地址栏中提交手段包括文本框列表文本区等例如提交该表单使用方法向请求访问的页面提交信息提交信息的手段是文本框文本框的名字由属性的值指定例如名字是在文本框输入信息其中默认信息是然后单击提交键向服务器的页面提交信息表单请求访问的页面可以让内置对象调用方法并让取值是标记中给出的文本框的名字比如获取该表单通过文本框提交的文本信息即用户在控件文本框中输入的文本默认值是比如常用方法对象常用方法如下方法说明获取请求参数的值获取所有参数名称获取请求参数的所有值获取属性的值返回所有属性的名称集合给对象赋值删除指定的属性获取所有的对象返回对应的对象如果没有则创建一个对象返回对应的对象如果没有且值为则创建一个对象返回头信息的名称集合获取指定的头信息获取请求方法客户提交信息方式避免乱码当对象处理汉字信息时需要进行特殊处理防止出现乱码现象页面文件的编码为编码只要让对象在获取信息之前调用方法设置编码为默认是就可以避免乱码现象对象当用户访问一个服务器的页面时会提交一个请求服务器收到请求时返回响应响应和请求类似也有某种结构每个响应都由状态行开始可以包含几个头及可能的信息体网页的结果输出部分对象获取用户请求提交的信息与对象相对应的对象是对象可以用对象对用户的请求作出动态响应向用户端发送数据比如当一个用户请求访问一个页面时该页面用指令设置页面的属性的值是那么服务器将按照这种属性值响应用户对页面的请求将页面的静态部分返回给用户用户浏览器接收到该响应就会使用解释器解释执行所收到的信息常用方法对象的常用方法如下方法说明添加头信息参数名称和对应值添加信息实现页面重定向实现页面的响应状态代码设置页面的类型和字符集设定页面响应的编码类型动态响应属性页面用指令设置页面的属性的值那么服务器将按照这种属性值作出响应将页面的静态部分返回给用户用户浏览器接收到该响应就会使用相应的手段处理所收到的信息由于指令只能为指定一个值来决定响应的类型如果想动态地改变这个属性的值来响应用户就需要使用对象的方法来改变的属性值对象的重定向在某些情况下当响应用户时需要将用户重新引导至另一个页面例如如果用户输入的表单信息不完整就会再被引导到该表单的输入页面此时可以使用对象的方法实现用户的重定向即让用户从一个页面跳转到中指定的页面即所谓的客户端跳转需要注意的是当使用方法将用户从当前页面重定向另一个页面时服务器还是要把当前页面执行完毕后才实施重定向跳转操作但服务器不再给用户看当前页面的执行效果如果在执行方法后紧接着执行了返回语句那么服务器会立刻结束当前页面的执行对象协议是一种无状态协议一个用户向服务器发出请求然后服务器返回响应在服务器端不保留用户的有关信息因此当下一次发出请求时服务器无法判断这一次请求和以前的请求是否属于同一用户当一个用户访问一个服务目录时可能会在这个服务目录的几个页面反复链接反复刷新一个页面或不断地向一个页面提交信息等服务器应当通过某种办法知道这是同一个用户服务器可以使用内置对象会话记录用户的信息内置对象由服务器负责创建是实现了接口类的一个实例可以在服务器的中查找接口的方法常用方法对象的常用方法如下方法说明将参数名和参数值存放在对象中通过返回获取相应的值如果没有相应的值则返回删除指定的参数获取对象中存储的所有参数返回对象创建的时间获取对象的值用于检查对象是不是新对象如果客户端禁用了则始终返回终止即指定对象失效设置对象的有效时间单位秒获取对象的有效时间单位秒获取上次访问对象的时间对象的当一个用户首次访问服务目录中的一个页面时服务器产生一个对象这个对象调用相应的方法可以存储用户在访问该服务目录中各个页面期间提交的各种信息比如姓名号码等信息这个对象被分配了一个类型的号服务器同时将这个号发送到用户端存放在用户浏览器的中这样对象和用户之间就建立起一一对应的关系即每个用户都对应着一个对象称作用户的会话不同用户不同浏览器的对象互不相同具有不同的号码当用户再访问该服务目录的其他页面时或从该服务目录链接到其他服务器再回到该服务目录时服务器不再分配给用户的新对象而是使用完全相同的一个直到对象达到了最大生存时间或用户关闭自己的浏览器或服务器关闭服务器将销毁用户的对象即和用户的会话对应关系消失如果用户的对象被销毁当用户再请求访问该服务目录时服务器将为该用户创建一个新的对象简单地说用户浏览器在访问一个服务目录期间服务器为该用户分配一个对象称作和该用户的会话服务器可以在各个页面使用这个对象记录当前用户的有关信息而且服务器保证不同用户的对象互不相同同一个用户在不同的服务目录中的对象是互不相同的对象与重写对象能和用户建立起一一对应关系依赖于用户浏览器是否支持如果用户端浏览器不支持那么用户在不同网页之间的对象可能是互不相同的因为服务器无法将存放到用户端浏览器中就不能建立对象和用户的一一对应关系如果用户不支持页面可以通过重写来实现对象的唯一性所谓重写就是当用户从一个页面重新链接到一个页面时通过向这个新的添加参数把对象的传带过去这样就可以保障用户在该服务目录的各个页面中的对象是完全相同的可以让对象调用或方法实现重写对象存储数据对象驻留在服务器端该对象调用某些方法保存用户在访问某个服务目录期间的有关数据对象使用下列方法处理数据对象可以调用该方法将参数指定的对象添加到对象中并为添加的对象指定了一个索引关键字如果添加的两个对象的关键字相同则先前添加的对象被清除获取对象索引关键字是的对象由于任何对象都可以添加到对象中因此用该方法取回对象时应显式转化为原来的类型对象调用该方法产生一个枚举对象该枚举对象使用遍历中的各个对象所对应的关键字对象调用该方法移掉关键字对应的对象对象的生存期限一个用户在某个服务目录的对象的生存期限依赖于对象是否调用方法使得无效或对象达到了设置的最长的发呆状态时间以及用户是否关闭浏览器或服务器被关闭所谓发呆状态时间是指用户对某个服务目录发出的两次请求之间的间隔时间默认的发呆时间是分钟比如用户对某个服务目录下的页面发出请求并得到响应如果用户不再对该服务目录发出请求可能去请求其他的服务目录那么用户对该服务目录进入发呆状态直到用户再次请求该服务目录时发呆状态结束可以修改服务器下的重新设置各个服务目录下的对象的最长发呆时间打开安装目录中文件下的配置文件找到将其中的修改成所要求的值即可单位为分钟对象对象是的实例对象在服务器部署应用和项目时容器仅创建一次实例也就是说设置的任何属性和值可以用于整个应用所有页面可以将对象看作应用的全局变量一般用于保存应用程序的公用数据对象在应用运行时一直存在于服务器中非常占用资源因此在实际开发中不推荐使用否则容易造成内存不足等情况常用方法对象常用方法如下方法说明获取属性名称对应的设置对应的属性值返回对象中所有的删除对象中指定的属性获取当前的版本信息获取指定文件的实际路径对象对象是的实例对象对象包含了很多流中的方法和特性最常用的就是输出内容到中常用方法对象的常用方法如下方法说明将内容直接打印在标签中类似于唯一区别是方法添加了换行符输出换行字符清除页面缓冲区检查页面是否自动清除缓冲区习题假设使用的表单中有如下的多选择框鸟苹果猫月亮该表单所请求的可以使用对象获取该表单提交的数据那么下列哪些是对象获取该表单提交的值的正确语句如果表单提交的信息中有汉字接收该信息的页面应做怎样的处理查看答案答当对象处理汉字信息时需要进行特殊处理防止出现乱码现象页面文件的编码为编码只要让对象在获取信息之前调用方法设置编码为默认是就可以避免乱码现象编写两个页面和用户可以使用提供的表单输入一个字符串并提交给页面该页面通过内置对象获取页面提交的字符串计算并显示该字符串的长度查看答案答代码如下提交重置您输入的字符串为字符串的长度为返回运行截图对象调用方法的作用是什么查看答案答使用对象的方法实现用户的重定向即让用户从一个页面跳转到中指定的页面即所谓的客户端跳转一个用户在不同服务目录中的对象相同吗查看答案答不相同一个用户在同一服务目录的不同子目录中的对象相同吗查看答案答相同编写一个页面该页面使用下拉列表提供一些歌曲名用户选择一个一个歌曲名单击提交键提交给当前页面然后当前页面播放用户选择的音乐音频文件保存的服务目录的子目录中查看答案答代码如下错位时空错位时空海底海底姑娘在远方姑娘在远方播放错位时空用户选择要播放错位时空错位时空海底用户选择要播放海底海底姑娘在远方用户选择要播放姑娘在远方姑娘在远方运行截图返回目录上一章下一章',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-12 16:47:08',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://pic.imgdb.cn/item/64f97fcf661c6c8e544e533e.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网站</div><div class="back-menu-list"><a class="back-menu-item" href="https://dihaozhe.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64f98091661c6c8e544e8413.webp" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://star-di.com:8080/BasedOnWebProgramming_war_exploded/" title="JSP 程序设计"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/65016a12661c6c8e546c4a0e.webp" alt="JSP 程序设计"/><span class="back-menu-item-text">JSP 程序设计</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">邸浩哲Geo</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文库</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 文章总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 全部分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 全部标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 学习</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/note/"><i class="anzhiyufont anzhiyu-icon-book faa-tada" style="font-size: 0.9em;"></i><span> 笔记仓库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=9013145695&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 社交</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友情链接</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-shoe-prints faa-tada" style="font-size: 0.9em;"></i><span> 到此一游</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-bullhorn faa-tada" style="font-size: 0.9em;"></i><span> 即刻短文</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-keyboard faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button" title="随机前往一个文章"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button" title="搜索文章🔍"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索文章🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" title="打开中控台" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://pic.imgdb.cn/item/64f98092661c6c8e544e84e6.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64f98092661c6c8e544e84e6.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://pic.imgdb.cn/item/64f980fb661c6c8e544ee38d.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64f980fb661c6c8e544ee38d.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/JDK/" style="font-size: 1.05rem;">JDK<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>1</sup></a><a href="/tags/Tomcat/" style="font-size: 1.05rem;">Tomcat<sup>1</sup></a><a href="/tags/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">安装教程<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav></header><main id="blog-container"><div class="layout" id="content-inner"><div id="page"><h1 class="page-title">第四章 JSP 内置对象</h1><div id="article-container"><div class="note info flat"><p>有些对象不用声明就可以在 JSP 页面的 Java 程序片和表达式部分使用，这就是 JSP 的内置对象。</p>
<p>JSP 的常用内置对象有 <strong>request</strong>、<strong>response</strong>、<strong>session</strong>、<strong>application</strong> 和 <strong>out</strong>。</p>
</div>

<h2 id="4-1-request-对象"><a href="#4-1-request-对象" class="headerlink" title="4.1 request 对象"></a>4.1 request 对象</h2><p>HTTP 通信协议是用户与服务器之间一种提交（请求）信息与响应信息（request&#x2F;response）的通信协议。在 JSP 中，内置对象 request 封装了用户提交的信息，那么该对象调用相应的方法可以获取封装的信息，即使用该对象可以获取用户提交的信息。</p>
<p>内置对象 request 是实现了 ServletRequest 接口类的一个实例，可以在 Tomcat 服务器的 <code>webapps \tomcat-docs\servletapi</code> 中查找 ServletRequest 接口的方法。</p>
<p>用户通常使用 HTML 的 form 表单（也称 form 标记）请求访问服务器的某个 JSP 页面（或 servlet），并提交必要信息给所请求的 JSP 页面（servlet）。表单的一般格式是：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;请求访问的页面或 Servlet&quot;</span> method=<span class="string">&quot;get&quot;</span>/<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    提交手段</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>其中，<code>&lt;form&gt;</code> 是 form 表单的开始标签、<code>&lt;/form&gt;</code> 是结束标签，开始标签和结束标签之间是 form 表单的标记体的内容。<code>action</code> 是 form 表单的属性，其属性值给出表单请求访问的 JSP 页面或 servlet。form 表单中的 <code>method</code> 属性取值 get 或 post。</p>
<p>get 方法和 post 方法的主要区别是：使用 get 方法提交的信息会在提交的过程中显示在浏览器的地址栏中，而 post 方法提交的信息不会显示在地址栏中。</p>
<p>提交手段包括文本框、列表、文本区等，例如：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;tom.jsp&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;boy&quot;</span> value=<span class="string">&quot;ok&quot;</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>该 form 表单使用 post 方法向请求访问的 <code>tom.jsp</code> 页面提交信息，提交信息的手段是 text（文本框），文本框的名字由 <code>name</code> 属性的值指定（例如，名字是 boy)。在文本框输入信息（其中默认信息是 ok），然后单击 submit 提交键向服务器的 JSP 页面 <code>tom.jsp</code> 提交信息。</p>
<p>form 表单请求访问的 JSP 页面可以让内置 request 对象调用 <code>getParameter(String s)</code> 方法，并让 s 取值是 <code>input</code> 标记中 <code>name</code> 给出的文本框 text 的名字（比如 boy），获取该表单通过文本框 text 提交的文本信息（即用户在 GUI 控件文本框中输入的文本，默认值是 ok），比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getParameter(<span class="string">&quot;boy&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><p>request 对象常用方法如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>String getParameter(String name)</td>
<td>获取请求参数 name 的值</td>
</tr>
<tr>
<td>Enumeration getParameterNames()</td>
<td>获取所有参数名称</td>
</tr>
<tr>
<td>String[] getParameterValues(String name)</td>
<td>获取请求参数 name 的所有值</td>
</tr>
<tr>
<td>Object getAttribute(String name)</td>
<td>获取 name 属性的值</td>
</tr>
<tr>
<td>Enumeration getAttributeNames()</td>
<td>返回所有属性的名称集合</td>
</tr>
<tr>
<td>void setAttribute(String key, Object value)</td>
<td>给 key 对象赋 value 值</td>
</tr>
<tr>
<td>void removeAttribute(String name)</td>
<td>删除指定的 name 属性</td>
</tr>
<tr>
<td>cookie[] getCookies()</td>
<td>获取所有的 cookie 对象</td>
</tr>
<tr>
<td>HttpSession getSession()</td>
<td>返回 request 对应的 session 对象，如果没有则创建一个 session 对象</td>
</tr>
<tr>
<td>HttpSession getSession(boolean create)</td>
<td>返回 request 对应的 session 对象，如果没有，且 create 值为 true，则创建一个 session 对象</td>
</tr>
<tr>
<td>Enumeration getHeaderNames()</td>
<td>返回 HTTP 头信息的名称集合</td>
</tr>
<tr>
<td>String getHeader(String name)</td>
<td>获取 name 指定的 HTTP 头信息</td>
</tr>
<tr>
<td>String getMethod()</td>
<td>获取 HTTP 请求方法&#x2F;客户提交信息方式</td>
</tr>
</tbody></table>
<h3 id="避免乱码"><a href="#避免乱码" class="headerlink" title="避免乱码"></a>避免乱码</h3><p>当 request 对象处理汉字信息时，需要进行特殊处理，防止出现乱码现象。</p>
<p>JSP 页面文件的编码为 UTF-8 编码，只要让 request 对象在获取信息之前调用 <code>setCharacterEncoding()</code> 方法设置编码为 UTF-8（默认是 ISO-8859-1）就可以避免乱码现象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="4-2-response-对象"><a href="#4-2-response-对象" class="headerlink" title="4.2 response 对象"></a>4.2 response 对象</h2><p>当用户访问一个服务器的页面时，会提交一个 HTTP 请求，服务器收到请求时，返回 HTTP 响应。响应和请求类似，也有某种结构，每个响应都由状态行开始，可以包含几个头及可能的信息体（网页的结果输出部分）。</p>
<p>request 对象获取用户请求提交的信息，与 request 对象相对应的对象是 response 对象。可以用 response 对象对用户的请求作出动态响应，向用户端发送数据。比如，当一个用户请求访问一个 JSP 页面时，该页面用 <code>page</code> 指令设置页面的 <code>contentType</code> 属性的值是 text&#x2F;html，那么 Tomcat 服务器将按照这种属性值响应用户对页面的请求，将页面的静态部分返回给用户，用户浏览器接收到该响应就会使用 HTML 解释器解释执行所收到的信息。</p>
<h3 id="常用方法-1"><a href="#常用方法-1" class="headerlink" title="常用方法"></a>常用方法</h3><p>response 对象的常用方法如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>void addHeader(String name, String value)</td>
<td>添加头信息（参数名称和对应值）</td>
</tr>
<tr>
<td>void addCookie(Cookie cookie)</td>
<td>添加 cookie 信息</td>
</tr>
<tr>
<td>void sendRedirect(String location)</td>
<td>实现页面重定向</td>
</tr>
<tr>
<td>void setStatus(int sc)</td>
<td>实现页面的响应状态代码</td>
</tr>
<tr>
<td>void setContentType(String type)</td>
<td>设置页面的 MIME 类型和字符集</td>
</tr>
<tr>
<td>void setCharacterEncoding(String charset)</td>
<td>设定页面响应的编码类型</td>
</tr>
</tbody></table>
<h3 id="动态响应-contentType-属性"><a href="#动态响应-contentType-属性" class="headerlink" title="动态响应 contentType 属性"></a>动态响应 contentType 属性</h3><p>页面用 <code>page</code> 指令设置页面的 <code>contentType</code> 属性的值，那么 Tomcat 服务器将按照这种属性值作出响应，将页面的静态部分返回给用户，用户浏览器接收到该响应就会使用相应的手段处理所收到的信息。由于 <code>page</code> 指令只能为 <code>contentType</code> 指定一个值来决定响应的 MIME 类型，如果想动态地改变这个属性的值来响应用户，就需要使用 response 对象的 <code>setContentType(String s)</code> 方法来改变 <code>contentType</code> 的属性值。</p>
<h3 id="response-对象的重定向"><a href="#response-对象的重定向" class="headerlink" title="response 对象的重定向"></a>response 对象的重定向</h3><p>在某些情况下，当响应用户时，需要将用户重新引导至另一个页面。例如，如果用户输入的 form 表单信息不完整，就会再被引导到该 form 表单的输入页面。</p>
<p>此时可以使用 response 对象的 <code>sendRedirect(URL url)</code> 方法实现用户的重定向，即让用户从一个页面跳转到 <code>sendRedirect(URL url)</code> 中 url 指定的页面，即所谓的客户端跳转。需要注意的是当使用 <code>sendRedirect(URL url)</code> 方法将用户从当前页面重定向另一个页面时，Tomcat 服务器还是要把当前 JSP 页面执行完毕后才实施重定向（跳转）操作，但 Tomcat 服务器不再给用户看当前页面的执行效果。如果在执行 <code>sendRedirect(URL url)</code> 方法后，紧接着执行了 return 返回语句，那么 Tomcat 服务器会立刻结束当前 JSP 页面的执行。</p>
<h2 id="4-3-session-对象"><a href="#4-3-session-对象" class="headerlink" title="4.3 session 对象"></a>4.3 session 对象</h2><p>HTTP 协议是一种无状态协议。一个用户向服务器发出请求（request），然后服务器返回响应（response），在服务器端不保留用户的有关信息，因此当下一次发出请求时，服务器无法判断这一次请求和以前的请求是否属于同一用户。当一个用户访问一个 Web 服务目录时，可能会在这个服务目录的几个页面反复链接，反复刷新一个页面或不断地向一个页面提交信息等，服务器应当通过某种办法知道这是同一个用户。Tomcat 服务器可以使用内置对象 session（会话）记录用户的信息。内置对象 session 由 Tomcat 服务器负责创建，session 是实现了 HttpSession 接口类的一个实例，可以在 Toamcat 服务器的 <code>webapps\tomcat-docs\servletapi</code> 中查找 HttpSession 接口的方法。</p>
<h3 id="常用方法-2"><a href="#常用方法-2" class="headerlink" title="常用方法"></a>常用方法</h3><p>session 对象的常用方法如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>void setAttribute(String name, Object value)</td>
<td>将参数名和参数值存放在 session 对象中</td>
</tr>
<tr>
<td>Object getAttribute(String name)</td>
<td>通过 name 返回获取相应的 value 值，如果 name 没有相应的 value 值，则返回 null</td>
</tr>
<tr>
<td>void removeAttribute(String name)</td>
<td>删除指定的 name 参数</td>
</tr>
<tr>
<td>Enumeration getAttributeNames()</td>
<td>获取 session 对象中存储的所有参数</td>
</tr>
<tr>
<td>long getCreationTime()</td>
<td>返回 session 对象创建的时间</td>
</tr>
<tr>
<td>String getId()</td>
<td>获取 session 对象的 ID 值</td>
</tr>
<tr>
<td>boolean isNew()</td>
<td>用于检查 session 对象是不是新对象，如果客户端禁用了 cookie ，则 session.isNew() 始终返回 true</td>
</tr>
<tr>
<td>void invalidate()</td>
<td>终止 session，即指定 session 对象失效</td>
</tr>
<tr>
<td>void setMaxInactiveInterval()</td>
<td>设置 session 对象的有效时间，单位：秒</td>
</tr>
<tr>
<td>int getMaxInactiveInterval()</td>
<td>获取 session 对象的有效时间，单位：秒</td>
</tr>
<tr>
<td>long getLastAccessedTime()</td>
<td>获取上次访问 session 对象的时间</td>
</tr>
</tbody></table>
<h3 id="session-对象的-id"><a href="#session-对象的-id" class="headerlink" title="session 对象的 id"></a>session 对象的 id</h3><p>当一个用户首次访问 Web 服务目录中的一个 JSP 页面时，Tomcat 服务器产生一个 session 对象，这个 session 对象调用相应的方法可以存储用户在访问该 Web 服务目录中各个页面期间提交的各种信息，比如姓名、号码等信息。这个 session 对象被分配了一个 String 类型的 id 号，Tomcat 服务器同时将这个 id 号发送到用户端，存放在用户（浏览器）的 Cookie 中。这样，session 对象和用户之间就建立起一一对应的关系，即每个用户都对应着一个 session 对象（称作用户的会话），不同用户（不同浏览器）的 session 对象互不相同，具有不同的 id 号码。当用户再访问该 Web 服务目录的其他页面时，或从该 Web 服务目录链接到其他 Web 服务器再回到该 Web 服务目录时， Tomcat 服务器不再分配给用户的新 session 对象，而是使用完全相同的一个，直到 session 对象达到了最大生存时间或用户关闭自己的浏览器或 Tomcat 服务器关闭，Tomcat 服务器将销毁用户的 session 对象，即和用户的会话对应关系消失。如果用户的 session 对象被销毁，当用户再请求访问该 Web 服务目录时，Tomcat 服务器将为该用户创建一个新的 session 对象。</p>
<p>简单地说，用户（浏览器）在访问一个 Web 服务目录期间，服务器为该用户分配一个 session 对象（称作和该用户的会话），服务器可以在各个页面使用这个 session 对象记录当前用户的有关信息。而且服务器保证不同用户的 session 对象互不相同。</p>
<blockquote>
<p>同一个用户在不同的 Web 服务目录中的 session 对象是互不相同的。</p>
</blockquote>
<h3 id="session-对象与-URL-重写"><a href="#session-对象与-URL-重写" class="headerlink" title="session 对象与 URL 重写"></a>session 对象与 URL 重写</h3><p>session 对象能和用户建立起一一对应关系依赖于用户浏览器是否支持 Cookie。如果用户端浏览器不支持 Cookie，那么用户在不同网页之间的 session 对象可能是互不相同的，因为 Tomcat 服务器无法将 id 存放到用户端浏览器中，就不能建立 session 对象和用户的一一对应关系。</p>
<p>如果用户不支持 Cookie， JSP 页面可以通过 URL 重写来实现 session 对象的唯一性。所谓 URL 重写，就是当用户从一个页面重新链接到一个页面时，通过向这个新的 URL 添加参数，把 session 对象的 id 传带过去，这样就可以保障用户在该 Web 服务目录的各个页面中的 session 对象是完全相同的。可以让 response 对象调用 <code>encodeURL()</code> 或 <code>encodeRedirectURL()</code> 方法实现 URL 重写。</p>
<h3 id="session-对象存储数据"><a href="#session-对象存储数据" class="headerlink" title="session 对象存储数据"></a>session 对象存储数据</h3><p>session 对象驻留在服务器端，该对象调用某些方法保存用户在访问某个 Web 服务目录期间的有关数据。</p>
<p>session 对象使用下列方法处理数据：</p>
<ol>
<li><code>public void setAttribute(String key, Object obj)</code>。session 对象可以调用该方法将参数 Object 指定的对象 obj 添加到 session 对象中，并为添加的对象指定了一个索引关键字，如果添加的两个对象的关键字相同，则先前添加的对象被清除。</li>
<li><code>public Object getAttribute(String key)</code>。获取 session 对象索引关键字是 key 的对象。由于任何对象都可以添加到 session 对象中，因此用该方法取回对象时，应显式转化为原来的类型。</li>
<li><code>public Enumeration getAttributeNames()</code>。session 对象调用该方法产生一个枚举对象，该枚举对象使用 <code>nextElemets()</code> 遍历 session 中的各个对象所对应的关键字。</li>
</ol>
<ol start="4">
<li><code>public void removeAttribute(String key)</code>。session 对象调用该方法移掉关键字 key 对应的对象。</li>
</ol>
<h3 id="session-对象的生存期限"><a href="#session-对象的生存期限" class="headerlink" title="session 对象的生存期限"></a>session 对象的生存期限</h3><p>一个用户在某个 Web 服务目录的 session 对象的生存期限依赖于 session 对象是否调用 <code>invalidate()</code> 方法使得 session 无效或 session 对象达到了设置的最长的“发呆”状态时间以及用户是否关闭浏览器或服务器被关闭。所谓“发呆”状态时间是指用户对某个 Web 服务目录发出的两次请求之间的间隔时间（默认的发呆时间是 30 分钟）。比如，用户对某个 Web 服务目录下的 JSP 页面发出请求，并得到响应，如果用户不再对该 Web 服务目录发出请求（可能去请求其他的 Web 服务目录），那么用户对该 Web 服务目录进入“发呆”状态，直到用户再次请求该 Web 服务目录时，“发呆”状态结束。</p>
<p>可以修改 Tomcat 服务器下的 <code>web.xml</code>，重新设置各个 Web 服务目录下的 session 对象的最长“发呆”时间。打开 Tomcat 安装目录中 conf 文件下的配置文件 <code>web.xml</code>，找到</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>将其中的 30 修改成所要求的值即可（单位为分钟）。</p>
<h2 id="4-4-application-对象"><a href="#4-4-application-对象" class="headerlink" title="4.4 application 对象"></a>4.4 application 对象</h2><p>application 对象是 javax.servlet.ServletContext 的实例对象。在服务器部署应用和项目时，Web 容器仅创建一次 ServletContext 实例，也就是说 application 设置的任何属性和值可以用于整个应用（所有 JSP 页面）。可以将 application 对象看作 Web 应用的全局变量。一般用于保存应用程序的公用数据。</p>
<blockquote>
<p>application 对象在 Web 应用运行时一直存在于服务器中，非常占用资源，因此在实际开发中不推荐使用，否则容易造成内存不足等情况。</p>
</blockquote>
<h3 id="常用方法-3"><a href="#常用方法-3" class="headerlink" title="常用方法"></a>常用方法</h3><p>application 对象常用方法如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Object getAttribute(String attributeName)</td>
<td>获取 attributeName（属性名称）对应的 object</td>
</tr>
<tr>
<td>void setAttribute(String attributeName, Object object)</td>
<td>设置 attributeName 对应的属性值</td>
</tr>
<tr>
<td>Enumeration getAttributeNames()</td>
<td>返回 application 对象中所有的 attributeName</td>
</tr>
<tr>
<td>void removeAttribute(String objectName)</td>
<td>删除 application 对象中指定 attributeName 的属性</td>
</tr>
<tr>
<td>String getServerInfo()</td>
<td>获取当前 Servlet 的版本信息</td>
</tr>
<tr>
<td>String getRealPath(String value)</td>
<td>获取指定文件的实际路径</td>
</tr>
</tbody></table>
<h2 id="4-5-out-对象"><a href="#4-5-out-对象" class="headerlink" title="4.5 out 对象"></a>4.5 out 对象</h2><p>out 对象是 javax.servlet.jsp.JspWriter 的实例对象。out 对象包含了很多 IO 流中的方法和特性，最常用的就是输出内容到 HTML 中。</p>
<h3 id="常用方法-4"><a href="#常用方法-4" class="headerlink" title="常用方法"></a>常用方法</h3><p>out 对象的常用方法如下：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>void print()</td>
<td>将内容直接打印在 HTML 标签中</td>
</tr>
<tr>
<td>void println()</td>
<td>类似于 print，唯一区别是 println 方法添加了换行符</td>
</tr>
<tr>
<td>void newLine()</td>
<td>输出换行字符</td>
</tr>
<tr>
<td>void clear()</td>
<td>清除页面缓冲区</td>
</tr>
<tr>
<td>boolean isAutoFlush()</td>
<td>检查页面是否自动清除缓冲区</td>
</tr>
</tbody></table>
<h2 id="习题-4"><a href="#习题-4" class="headerlink" title="习题 4"></a>习题 4</h2><ol>
<li><p><strong>假设 JSP 使用的表单中有如下的 GUI （多选择框）:</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;item&quot;</span> value=<span class="string">&quot;bird&quot;</span>&gt;鸟</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;item&quot;</span> value=<span class="string">&quot;apple&quot;</span>&gt;苹果</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;item&quot;</span> value=<span class="string">&quot;cat&quot;</span>&gt;猫</span><br><span class="line">&lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;item&quot;</span> value=<span class="string">&quot;moon&quot;</span>&gt;月亮</span><br></pre></td></tr></table></figure>

<p><strong>该表单所请求的 JSP 可以使用 request 对象获取该表单提交的数据，那么，下列哪些是 request 对象获取该表单提交的值的正确语句：</strong></p>
<div class='checkbox green'><input type="checkbox" />
            <p>A. <code>String a = request.getParameter(item);</code></p>
            </div>

<div class='checkbox green'><input type="checkbox" />
            <p>B. <code>String b = request.getParameter(checkbox);</code></p>
            </div>

<div class='checkbox green checked'><input type="checkbox" checked="checked"/>
            <p>C. <code>String c []= request.getParameterValues(item);</code></p>
            </div>

<div class='checkbox green'><input type="checkbox" />
            <p>D. <code>String d []= request.getParameterValues(checkbox);</code></p>
            </div>
</li>
<li><p><strong>如果表单提交的信息中有汉字，接收该信息的页面应做怎样的处理？</strong></p>
<div class="hide-block"><button type="button" class="hide-button" style="background-color:  green;">查看答案
    </button><div class="hide-content"><p>答：当 request 对象处理汉字信息时，需要进行特殊处理，防止出现乱码现象。</p>
<p>JSP 页面文件的编码为 UTF-8 编码，只要让 request 对象在获取信息之前调用 <code>setCharacterEncoding()</code> 方法设置编码为 UTF-8（默认是 ISO-8859-1）就可以避免乱码现象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>
</div></div>
</li>
<li><p><strong>编写两个 JSP 页面 <code>inputString.jsp</code> 和 <code>computer.jsp</code>，用户可以使用 <code>inputString.jsp</code> 提供的表单输入一个字符串，并提交给 <code>computer.jsp</code> 页面，该页面通过内置对象获取 <code>inputString.jsp</code> 页面提交的字符串，计算并显示该字符串的长度。</strong></p>
<div class="hide-block"><button type="button" class="hide-button" style="background-color:  green;">查看答案
    </button><div class="hide-content"><p>答：代码如下：</p>
<p><strong>inputString.jsp</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page pageEncoding=<span class="string">&quot;utf-8&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;form action=<span class="string">&quot;computer.jsp&quot;</span> method=post name=form&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;string&quot;</span> value=<span class="string">&quot;&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>/&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;reset&quot;</span> value=<span class="string">&quot;重置&quot;</span>/&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>computer.jsp</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page pageEncoding=<span class="string">&quot;utf-8&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">    &lt;% </span><br><span class="line">       <span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;string&quot;</span>);</span><br><span class="line">       out.println(<span class="string">&quot;您输入的字符串为：&quot;</span> + string);</span><br><span class="line">       out.println(<span class="string">&quot;字符串的长度为：&quot;</span> + string.length());</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;br&gt;&lt;a href=<span class="string">&quot;inputString.jsp&quot;</span>&gt;返回&lt;/a&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行截图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64d3b9b11ddac507cce7db59.png" alt="4-1 计算字符串长度"></p>
</div></div>
</li>
<li><p><strong>response 对象调用 <code>sendRedirect(URL url)</code> 方法的作用是什么？</strong></p>
<div class="hide-block"><button type="button" class="hide-button" style="background-color:  green;">查看答案
    </button><div class="hide-content"><p>答：使用 response 对象的 <code>sendRedirect(URL url)</code> 方法实现用户的重定向，即让用户从一个页面跳转到 <code>sendRedirect(URL url)</code> 中 url 指定的页面，即所谓的客户端跳转。</p>
</div></div>
</li>
<li><p><strong>一个用户在不同 Web 服务目录中的 session 对象相同吗？</strong></p>
<div class="hide-block"><button type="button" class="hide-button" style="background-color:  green;">查看答案
    </button><div class="hide-content"><p>答：不相同。</p>
</div></div>
</li>
<li><p><strong>一个用户在同一 Web 服务目录的不同子目录中的 session 对象相同吗？</strong></p>
<div class="hide-block"><button type="button" class="hide-button" style="background-color:  green;">查看答案
    </button><div class="hide-content"><p>答：相同。</p>
</div></div>
</li>
<li><p><strong>编写一个 JSP 页面 <code>selectMusic.jsp</code>，该页面使用 select（下拉列表）提供一些歌曲名，用户选择一个一个歌曲名，单击提交键提交给当前页面，然后当前页面播放用户选择的音乐（音频文件保存的 Web 服务目录的 \music 子目录中）。</strong></p>
<div class="hide-block"><button type="button" class="hide-button" style="background-color:  green;">查看答案
    </button><div class="hide-content"><p>答：代码如下：</p>
<p><strong>selectMusic.jsp</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page pageEncoding=<span class="string">&quot;utf-8&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;form action=<span class="string">&quot;selectMusic.jsp&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">            &lt;select name=<span class="string">&quot;music&quot;</span> id=<span class="string">&quot;music&quot;</span>&gt;</span><br><span class="line">                &lt;option value=<span class="string">&quot;错位时空&quot;</span>&gt;错位时空&lt;/option&gt;</span><br><span class="line">                &lt;option value=<span class="string">&quot;海底&quot;</span>&gt;海底&lt;/option&gt;</span><br><span class="line">                &lt;option value=<span class="string">&quot;姑娘在远方&quot;</span>&gt;姑娘在远方&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">            &lt;br&gt;&lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;播放&quot;</span>&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">music</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;music&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (music.equals(<span class="string">&quot;错位时空&quot;</span>)) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;!!!!A&quot;</span>);</span><br><span class="line">                    <span class="comment">// 用户选择要播放 错位时空</span></span><br><span class="line">                    out.println(<span class="string">&quot;&lt;audio src=&#x27;music/错位时空.mp3&#x27; autoplay=&#x27;autoplay&#x27;&gt;&lt;/audio&gt;&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (music.equals(<span class="string">&quot;海底&quot;</span>)) &#123;</span><br><span class="line">                    <span class="comment">// 用户选择要播放 海底</span></span><br><span class="line">                    out.println(<span class="string">&quot;&lt;audio src=&#x27;music/海底.mp3&#x27; autoplay=&#x27;autoplay&#x27;&gt;&lt;/audio&gt;&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (music.equals(<span class="string">&quot;姑娘在远方&quot;</span>)) &#123;</span><br><span class="line">                    <span class="comment">// 用户选择要播放 姑娘在远方</span></span><br><span class="line">                    out.println(<span class="string">&quot;&lt;audio src=&#x27;music/姑娘在远方.mp3&#x27; autoplay=&#x27;autoplay&#x27;&gt;&lt;/audio&gt;&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        %&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>运行截图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64d3c5461ddac507cc0deecb.png" alt="4-2 播放音乐"></p>
</div></div></li>
</ol>
<hr>
<a class="btn-anzhiyu " href="/note/note_3_backend/3.jsp/index" 
  title="返回目录"><span>返回目录</span></a>

<a class="btn-anzhiyu " href="/note/note_3_backend/3.jsp/3" 
  title="上一章"><span>上一章</span></a>

<a class="btn-anzhiyu " href="/note/note_3_backend/3.jsp/5" 
  title="下一章"><span>下一章</span></a>
</div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64f97fcf661c6c8e544e533e.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64f98091661c6c8e544e8403.webp" ait="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">邸浩哲Geo</h1><div class="author-info__desc">热爱可抵岁月漫长</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="mailto:dihaozhe@outlook.com" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="social-icon faa-parent animated-hover" href="https://github.com/dihaozhe-365" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://pic.imgdb.cn/item/64f98092661c6c8e544e84cd.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://pic.imgdb.cn/item/64f98092661c6c8e544e84d9.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-request-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.</span> <span class="toc-text">4.1 request 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E4%B9%B1%E7%A0%81"><span class="toc-number">1.2.</span> <span class="toc-text">避免乱码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-response-%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.</span> <span class="toc-text">4.2 response 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-1"><span class="toc-number">2.1.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%93%8D%E5%BA%94-contentType-%E5%B1%9E%E6%80%A7"><span class="toc-number">2.2.</span> <span class="toc-text">动态响应 contentType 属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#response-%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">2.3.</span> <span class="toc-text">response 对象的重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-session-%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.</span> <span class="toc-text">4.3 session 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-2"><span class="toc-number">3.1.</span> <span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E5%AF%B9%E8%B1%A1%E7%9A%84-id"><span class="toc-number">3.2.</span> <span class="toc-text">session 对象的 id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E5%AF%B9%E8%B1%A1%E4%B8%8E-URL-%E9%87%8D%E5%86%99"><span class="toc-number">3.3.</span> <span class="toc-text">session 对象与 URL 重写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">3.4.</span> <span class="toc-text">session 对象存储数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session-%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%9F%E9%99%90"><span class="toc-number">3.5.</span> <span class="toc-text">session 对象的生存期限</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-application-%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.</span> <span class="toc-text">4.4 application 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-3"><span class="toc-number">4.1.</span> <span class="toc-text">常用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-out-%E5%AF%B9%E8%B1%A1"><span class="toc-number">5.</span> <span class="toc-text">4.5 out 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-4"><span class="toc-number">5.1.</span> <span class="toc-text">常用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%A0%E9%A2%98-4"><span class="toc-number">6.</span> <span class="toc-text">习题 4</span></a></li></ol></div></div><div class="card-widget"><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/JDK/" style="font-size: 1.05rem;">JDK<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>1</sup></a><a href="/tags/Tomcat/" style="font-size: 1.05rem;">Tomcat<sup>1</sup></a><a href="/tags/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">安装教程<sup>2</sup></a></div></div><hr/><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr/><div class="card-webinfo"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="webinfo-item-title"><i class="anzhiyufont anzhiyu-icon-file-lines"></i><div class="item-name">文章总数 :</div></div><div class="item-count">2</div></div><div class="webinfo-item"><div class="webinfo-item-title"><i class="anzhiyufont anzhiyu-icon-stopwatch"></i><div class="item-name">建站天数 :</div></div><div class="item-count" id="runtimeshow" data-publishDate="2023-07-06T16:00:00.000Z"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></div></div><div class="webinfo-item"><div class="webinfo-item-title"><i class="anzhiyufont anzhiyu-icon-font"></i><div class="item-name">全站字数 :</div></div><div class="item-count">997</div></div><div class="webinfo-item"><div class="webinfo-item-title"><i class="anzhiyufont anzhiyu-icon-universal-access"></i><div class="item-name">总访客数 :</div></div><div class="item-count" id="busuanzi_value_site_uv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></div></div><div class="webinfo-item"><div class="webinfo-item-title"><i class="anzhiyufont anzhiyu-icon-square-poll-vertical"></i><div class="item-name">总访问量 :</div></div><div class="item-count" id="busuanzi_value_site_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></div></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:dihaozhe@outlook.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/dihaozhe-365" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" href="tencent://message/?uin=1839279043&amp;Site=&amp;Menu=yes" title="QQ"><i class="anzhiyufont anzhiyu-icon-qq"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64f97fcf661c6c8e544e533e.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/629900379" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.douyin.com/user/MS4wLjABAAAAGDgnLwA_rPyo8wJ-uBXtGfaMMmcqp9j3z9lygqF4ZS4" title="抖音"><i class="anzhiyufont anzhiyu-icon-tiktok"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la 统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la 统计</a><a class="footer-item" title="聚合图床" target="_blank" rel="noopener" href="https://www.superbed.cn/">聚合图床</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">文库</div><div class="footer-links"><a class="footer-item" title="文章总览" href="/archives/">文章总览</a><a class="footer-item" title="全部分类" href="/categories/">全部分类</a><a class="footer-item" title="全部标签" href="/tags/">全部标签</a></div></div><div class="footer-group"><div class="footer-title">学习</div><div class="footer-links"><a class="footer-item" title="笔记仓库" href="/note/">笔记仓库</a></div></div><div class="footer-group"><div class="footer-title">生活</div><div class="footer-links"><a class="footer-item" title="音乐馆" href="/music/">音乐馆</a></div></div><div class="footer-group"><div class="footer-title">社交</div><div class="footer-links"><a class="footer-item" title="友情链接" href="/link/">友情链接</a><a class="footer-item" title="到此一游" href="/comments/">到此一游</a><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a></div></div><div class="footer-group"><div class="footer-title">站长</div><div class="footer-links"><a class="footer-item" title="我的装备" href="/equipment/">我的装备</a><a class="footer-item" title="关于本人" href="/about/">关于本人</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies 协议" href="/cookies/">Cookies 协议</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/footer/邸浩哲-上班摸鱼中.svg" alt="距离月入 25 k也就还差一个大佬带我~" title="距离月入 25 k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2023 By 邸浩哲Geo </div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="冀ICP备-2023021272号">冀ICP备-2023021272号</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">1</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网站</div><div class="back-menu-list"><a class="back-menu-item" href="https://dihaozhe.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/64f98091661c6c8e544e8413.webp" alt="博客"/><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="http://star-di.com:8080/BasedOnWebProgramming_war_exploded/" title="JSP 程序设计"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic.imgdb.cn/item/65016a12661c6c8e546c4a0e.webp" alt="JSP 程序设计"/><span class="back-menu-item-text">JSP 程序设计</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文库</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 文章总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 全部分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 全部标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 学习</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/note/"><i class="anzhiyufont anzhiyu-icon-book faa-tada" style="font-size: 0.9em;"></i><span> 笔记仓库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 生活</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=9013145695&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 社交</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友情链接</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-shoe-prints faa-tada" style="font-size: 0.9em;"></i><span> 到此一游</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-bullhorn faa-tada" style="font-size: 0.9em;"></i><span> 即刻短文</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-keyboard faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/JDK/" style="font-size: 0.88rem;">JDK<sup>1</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>1</sup></a><a href="/tags/Tomcat/" style="font-size: 0.88rem;">Tomcat<sup>1</sup></a><a href="/tags/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">安装教程<sup>2</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="9013145695" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/9013145695&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>var meting_api = "https://meting.qjqq.cn/?server=:server&type=:type&id=:id&auth=:auth&r=:r";
</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("07/07/2023 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎访问邸浩哲Geo!`,
    `热爱可抵岁月漫长`,
    `
      ───────────────────────────────────────────────────────────────────────────────
      ─██████████████─██████████████─██████████████────────████████████───██████████─
      ─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░██────────██░░░░░░░░████─██░░░░░░██─
      ─██░░██████████─██░░██████████─██░░██████░░██────────██░░████░░░░██─████░░████─
      ─██░░██─────────██░░██████████─██░░██──██░░██────────██░░██──██░░██───██░░██───
      ─██░░██──██████─██░░░░░░░░░░██─██░░██──██░░██────────██░░██──██░░██───██░░██───
      ─██░░██──██░░██─██░░██████████─██░░██──██░░██────────██░░██──██░░██───██░░██───
      ─██░░██████░░██─██░░██████████─██░░██████░░██─██████─██░░████░░░░██─████░░████─
      ─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░░░░░░░░░██─██░░██─██░░░░░░░░████─██░░░░░░██─
      ─██████████████─██████████████─██████████████─██████─████████████───██████████─
      ───────────────────────────────────────────────────────────────────────────────
        `,
    "已上线",
    dnum,
    "天",
    "©2023 By 邸浩哲Geo V1.6.5",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 邸浩哲 %c 你正在访问 邸浩哲Geo 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("07/07/2023 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"邸浩哲-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站已经艰难运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"邸浩哲-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      img.src = "/img/footer/邸浩哲-下班啦.svg";
      img.title = "下班了就该开开心心的玩耍，嘿嘿~";
      img.alt = "下班了就该开开心心的玩耍，嘿嘿~";

      currentTimeHtml = `本站已经艰难运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.56.5/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><input type="hidden" name="page-type" id="page-type" value="anzhiyu"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://dihaozhe.zeabur.app',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.18/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@dihaozhe.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>